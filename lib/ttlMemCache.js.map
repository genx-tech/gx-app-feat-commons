{"version":3,"sources":["../src/ttlMemCache.js"],"names":["Feature","require","module","exports","type","SERVICE","load_","app","options","name","NodeCache","tryRequire","nodeCache","stdTTL","checkperiod","useClones","registerService"],"mappings":";;;;AAAA,MAAM;AACFA,EAAAA;AADE,IAEFC,OAAO,CAAC,WAAD,CAFX;;AASAC,MAAM,CAACC,OAAP,GAAiB;AAKbC,EAAAA,IAAI,EAAEJ,OAAO,CAACK,OALD;AAmBbC,EAAAA,KAAK,EAAE,gBAAgBC,GAAhB,EAAqBC,OAArB,EAA8BC,IAA9B,EAAoC;AACvC,UAAMC,SAAS,GAAGH,GAAG,CAACI,UAAJ,CAAe,YAAf,CAAlB;AACA,UAAMC,SAAS,GAAG,IAAIF,SAAJ,CAAc;AAC5BG,MAAAA,MAAM,EAAE,GADoB;AAE5BC,MAAAA,WAAW,EAAE,GAFe;AAG5BC,MAAAA,SAAS,EAAE,KAHiB;AAI5B,SAAGP;AAJyB,KAAd,CAAlB;AAOAD,IAAAA,GAAG,CAACS,eAAJ,CAAoBP,IAApB,EAA0BG,SAA1B;AACH;AA7BY,CAAjB","sourcesContent":["const {\n    Feature,\n} = require('@genx/app');\n\n/**\n * Time-to-live (TTL) Memory Cache\n * @module Feature_TtlMemCache\n */\n\nmodule.exports = {\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.SERVICE,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} options - Options for the feature\n     * @property {number} [options.stdTTL=180] - The standard ttl as number in seconds for every generated cache element. 0 = unlimited\n     * @property {number} [options.checkperiod=300] - The period in seconds, as a number, used for the automatic delete check interval. 0 = no periodic check.\n     * @property {boolean} [options.useClones=false] - En/disable cloning of variables. If true you'll get a copy of the cached variable. If false you'll save and get just the reference.\n     * @returns {Promise.<*>}\n     *\n     * @see[methods]{@link https://github.com/node-cache/node-cache}\n     *\n     */\n    load_: async function (app, options, name) {\n        const NodeCache = app.tryRequire('node-cache');\n        const nodeCache = new NodeCache({\n            stdTTL: 180,\n            checkperiod: 300,\n            useClones: false,\n            ...options,\n        });\n\n        app.registerService(name, nodeCache);\n    },\n};\n"],"file":"ttlMemCache.js"}