{"version":3,"sources":["../src/imageProcessor.js"],"names":["Feature","require","module","exports","type","SERVICE","load_","app","options","name","Sharp","tryRequire","service","fromFile","fileName","opts","fromBuffer","buffer","raw","create","registerService"],"mappings":";;;;AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAcC,OAAO,CAAC,WAAD,CAA3B;;AAOAC,MAAM,CAACC,OAAP,GAAiB;AAKbC,EAAAA,IAAI,EAAEJ,OAAO,CAACK,OALD;AAgBbC,EAAAA,KAAK,EAAE,gBAAgBC,GAAhB,EAAqBC,OAArB,EAA8BC,IAA9B,EAAoC;AACvC,UAAMC,KAAK,GAAGH,GAAG,CAACI,UAAJ,CAAe,OAAf,CAAd;AACA,UAAMC,OAAO,GAAG;AACZC,MAAAA,QAAQ,EAAE,CAACC,QAAD,EAAWC,IAAX,KAAoB,IAAIL,KAAJ,CAAUI,QAAV,EAAoBC,IAApB,CADlB;AAEZC,MAAAA,UAAU,EAAE,CAACC,MAAD,EAASF,IAAT,KAAkB,IAAIL,KAAJ,CAAUO,MAAV,EAAkBF,IAAI,IAAI;AAAEG,QAAAA,GAAG,EAAEH;AAAP,OAA1B,CAFlB;AAGZI,MAAAA,MAAM,EAAGJ,IAAD,IAAU,IAAIL,KAAJ,CAAUK,IAAI,IAAI;AAAEI,QAAAA,MAAM,EAAEJ;AAAV,OAAlB;AAHN,KAAhB;AAMAR,IAAAA,GAAG,CAACa,eAAJ,CAAoBX,IAApB,EAA0BG,OAA1B;AACH;AAzBY,CAAjB","sourcesContent":["const { Feature } = require('@genx/app');\n\n/**\n * Fast image processor (sharp)\n * @module Feature_ImageProcessor\n */\n\nmodule.exports = {\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    type: Feature.SERVICE,\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} [options] - Options for the feature\n     * @returns {Promise.<*>}\n     *\n     * @see[methods]{@link https://sharp.pixelplumbing.com}\n     *\n     */\n    load_: async function (app, options, name) {\n        const Sharp = app.tryRequire('sharp');\n        const service = {\n            fromFile: (fileName, opts) => new Sharp(fileName, opts),\n            fromBuffer: (buffer, opts) => new Sharp(buffer, opts && { raw: opts }),\n            create: (opts) => new Sharp(opts && { create: opts }),\n        };\n\n        app.registerService(name, service);\n    },\n};\n"],"file":"imageProcessor.js"}